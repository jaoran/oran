<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Title</title>
</head>
<body>
<div class="card">
    <h2>ðŸ”‘ AI Connection</h2>
    <input type="password" id="apiKey" placeholder="Paste Gemini API Key Here...">
    <p style="font-size: 0.7rem; color: #8b949e;">Your key is stored only in this browser's memory.</p>
</div>

<div class="card">
    <h2>ðŸ¤– AI Research Assistant</h2>
    <input type="text" id="aiQuery" placeholder="Ask about FedEx, Stocks, or Plants...">
    <button class="btn" onclick="askAI()">Run Research</button>
    <div id="aiResponse" style="margin-top: 15px; font-size: 0.9rem; line-height: 1.4; white-space: pre-wrap;"></div>
</div>

<script>
    async function askAI() {
        const key = document.getElementById('apiKey').value;
        const query = document.getElementById('aiQuery').value;
        const responseDisplay = document.getElementById('aiResponse');

        if (!key) {
            alert("Please paste your API key first!");
            return;
        }

        responseDisplay.innerText = "Thinking...";

        try {
            const response = await fetch(`https://generativelanguage.googleapis.com/v1beta/models/gemini-1.5-flash:generateContent?key=${key}`, {
                method: 'POST',
                headers: { 'Content-Type': 'application/json' },
                body: JSON.stringify({
                    contents: [{ parts: [{ text: query }] }]
                })
            });

            const data = await response.json();

            // Handling the specific JSON structure of Gemini
            if (data.candidates && data.candidates[0].content.parts[0].text) {
                responseDisplay.innerText = data.candidates[0].content.parts[0].text;
            } else {
                responseDisplay.innerText = "Error: Could not parse AI response.";
                console.log(data);
            }
        } catch (error) {
            responseDisplay.innerText = "Connection Error. Check your key and internet.";
            console.error(error);
        }
    }
</script>

</body>
</html>
